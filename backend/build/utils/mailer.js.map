{"version":3,"file":"mailer.js","names":["transporter","nodemailer","createTransport","service","auth","user","process","env","MAILER_USER","pass","MAILER_PASSWORD","sendPasswordResetMail","userEmail","token","username","toUpperCase","substring","mailOptions","from","to","subject","html","sendMail","error","info","console","log","response","sendConfirmationMail","confirmPasswordChange"],"sources":["../../src/utils/mailer.js"],"sourcesContent":["import nodemailer from 'nodemailer';\n\nlet transporter = nodemailer.createTransport({\n  service: 'gmail',\n  auth: {\n    user: process.env.MAILER_USER,\n    pass: process.env.MAILER_PASSWORD\n  }\n});\n\nconst sendPasswordResetMail = (userEmail, token, username) => {\n  username = username[0].toUpperCase() + username.substring(1);\n\n  let mailOptions = {\n    from: process.env.MAILER_USER,\n    to: userEmail,\n    subject: 'Password reset link',\n    html: `Dear ${username},\\n\\n`\n        + '<p>Click <a href=\"http://localhost:3001/users/recover?token=' + token\n        + '\">here</a> to reset your password.</p>' + `\\n\\nQuizzer Team`\n  };\n\n  transporter.sendMail(mailOptions, function (error, info) {\n    if (error) {\n      console.log(error);\n    } else {\n      console.log('Email sent: ' + info.response);\n    }\n  });\n};\n\nconst sendConfirmationMail = (userEmail, token, username) => {\n  username = username[0].toUpperCase() + username.substring(1);\n\n  let mailOptions = {\n    from: process.env.MAILER_USER,\n    to: userEmail,\n    subject: 'Activate your account',\n    html: `Dear ${username},\\n\\n`\n        + '<p>Click <a href=\"http://localhost:3001/users?confirmation=' + token\n        + '\">here</a> to complete your registration.</p>' + `\\n\\nQuizzer Team`\n  };\n\n  transporter.sendMail(mailOptions, function (error, info) {\n    if (error) {\n      console.log(error);\n    } else {\n      console.log('Email sent: ' + info.response);\n    }\n  });\n};\n\nconst confirmPasswordChange = (userEmail, username) => {\n  username = username[0].toUpperCase() + username.substring(1);\n\n  let mailOptions = {\n    from: process.env.MAILER_USER,\n    to: userEmail,\n    subject: 'Your account has been updated',\n    html: `Dear ${username},\\n\\n`\n        + '<p>The password on your account has been changed. If you did not do this change. Change your <a href=\"http://localhost:3001\">password</a></p>'\n        + `\\n\\nQuizzer Team`\n  };\n\n  transporter.sendMail(mailOptions, function (error, info) {\n    if (error) {\n      console.log(error);\n    } else {\n      console.log('Email sent: ' + info.response);\n    }\n  });\n}\n\nexport default {\n  sendPasswordResetMail,\n  sendConfirmationMail,\n  confirmPasswordChange\n};\n"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAIA,WAAW,GAAGC,uBAAWC,eAAX,CAA2B;EAC3CC,OAAO,EAAE,OADkC;EAE3CC,IAAI,EAAE;IACJC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,WADd;IAEJC,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG;EAFd;AAFqC,CAA3B,CAAlB;;AAQA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,SAAD,EAAYC,KAAZ,EAAmBC,QAAnB,EAAgC;EAC5DA,QAAQ,GAAGA,QAAQ,CAAC,CAAD,CAAR,CAAYC,WAAZ,KAA4BD,QAAQ,CAACE,SAAT,CAAmB,CAAnB,CAAvC;EAEA,IAAIC,WAAW,GAAG;IAChBC,IAAI,EAAEZ,OAAO,CAACC,GAAR,CAAYC,WADF;IAEhBW,EAAE,EAAEP,SAFY;IAGhBQ,OAAO,EAAE,qBAHO;IAIhBC,IAAI,EAAE,eAAQP,QAAR,aACA,8DADA,GACiED,KADjE,GAEA,wCAFA;EAJU,CAAlB;EASAb,WAAW,CAACsB,QAAZ,CAAqBL,WAArB,EAAkC,UAAUM,KAAV,EAAiBC,IAAjB,EAAuB;IACvD,IAAID,KAAJ,EAAW;MACTE,OAAO,CAACC,GAAR,CAAYH,KAAZ;IACD,CAFD,MAEO;MACLE,OAAO,CAACC,GAAR,CAAY,iBAAiBF,IAAI,CAACG,QAAlC;IACD;EACF,CAND;AAOD,CAnBD;;AAqBA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAChB,SAAD,EAAYC,KAAZ,EAAmBC,QAAnB,EAAgC;EAC3DA,QAAQ,GAAGA,QAAQ,CAAC,CAAD,CAAR,CAAYC,WAAZ,KAA4BD,QAAQ,CAACE,SAAT,CAAmB,CAAnB,CAAvC;EAEA,IAAIC,WAAW,GAAG;IAChBC,IAAI,EAAEZ,OAAO,CAACC,GAAR,CAAYC,WADF;IAEhBW,EAAE,EAAEP,SAFY;IAGhBQ,OAAO,EAAE,uBAHO;IAIhBC,IAAI,EAAE,eAAQP,QAAR,aACA,6DADA,GACgED,KADhE,GAEA,+CAFA;EAJU,CAAlB;EASAb,WAAW,CAACsB,QAAZ,CAAqBL,WAArB,EAAkC,UAAUM,KAAV,EAAiBC,IAAjB,EAAuB;IACvD,IAAID,KAAJ,EAAW;MACTE,OAAO,CAACC,GAAR,CAAYH,KAAZ;IACD,CAFD,MAEO;MACLE,OAAO,CAACC,GAAR,CAAY,iBAAiBF,IAAI,CAACG,QAAlC;IACD;EACF,CAND;AAOD,CAnBD;;AAqBA,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACjB,SAAD,EAAYE,QAAZ,EAAyB;EACrDA,QAAQ,GAAGA,QAAQ,CAAC,CAAD,CAAR,CAAYC,WAAZ,KAA4BD,QAAQ,CAACE,SAAT,CAAmB,CAAnB,CAAvC;EAEA,IAAIC,WAAW,GAAG;IAChBC,IAAI,EAAEZ,OAAO,CAACC,GAAR,CAAYC,WADF;IAEhBW,EAAE,EAAEP,SAFY;IAGhBQ,OAAO,EAAE,+BAHO;IAIhBC,IAAI,EAAE,eAAQP,QAAR,aACA,+IADA;EAJU,CAAlB;EASAd,WAAW,CAACsB,QAAZ,CAAqBL,WAArB,EAAkC,UAAUM,KAAV,EAAiBC,IAAjB,EAAuB;IACvD,IAAID,KAAJ,EAAW;MACTE,OAAO,CAACC,GAAR,CAAYH,KAAZ;IACD,CAFD,MAEO;MACLE,OAAO,CAACC,GAAR,CAAY,iBAAiBF,IAAI,CAACG,QAAlC;IACD;EACF,CAND;AAOD,CAnBD;;eAqBe;EACbhB,qBAAqB,EAArBA,qBADa;EAEbiB,oBAAoB,EAApBA,oBAFa;EAGbC,qBAAqB,EAArBA;AAHa,C"}