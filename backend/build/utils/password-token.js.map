{"version":3,"file":"password-token.js","names":["generatePasswordToken","token","characters","i","charAt","Math","floor","random","length","UserService","findByPasswordToken","user","generateConfirmationToken","findByConfirmationToken"],"sources":["../../src/utils/password-token.js"],"sourcesContent":["import UserService from \"../services/user-service\";\n\nconst generatePasswordToken = async () => {\n  let token = '';\n  let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (let i = 0; i < 24; i++) {\n    token += characters.charAt(Math.floor(Math.random() *\n        characters.length));\n  }\n\n  // user needs a unique token\n  let user = await UserService.findByPasswordToken(token);\n  if (user) {\n    await generatePasswordToken()\n  }\n\n  return token;\n};\n\nconst generateConfirmationToken = async () => {\n  let token = '';\n  let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (let i = 0; i < 24; i++) {\n    token += characters.charAt(Math.floor(Math.random() *\n        characters.length));\n  }\n\n  // user needs a unique token\n  let user = await UserService.findByConfirmationToken(token);\n  if (user) {\n    await generateConfirmationToken()\n  }\n\n  return token;\n}\n\nexport default {\n  generatePasswordToken,\n  generateConfirmationToken\n};\n"],"mappings":";;;;;;;AAAA;;;;;;;;AAEA,IAAMA,qBAAqB;EAAA,mEAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YACxBC,KADwB,GAChB,EADgB;YAExBC,UAFwB,GAEX,gEAFW;;YAI5B,KAASC,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;cAC3BF,KAAK,IAAIC,UAAU,CAACE,MAAX,CAAkBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAClCL,UAAU,CAACM,MADY,CAAlB,CAAT;YAED,CAP2B,CAS5B;;;YAT4B;YAAA,OAUXC,wBAAYC,mBAAZ,CAAgCT,KAAhC,CAVW;;UAAA;YAUxBU,IAVwB;;YAAA,KAWxBA,IAXwB;cAAA;cAAA;YAAA;;YAAA;YAAA,OAYpBX,qBAAqB,EAZD;;UAAA;YAAA,iCAerBC,KAfqB;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAArBD,qBAAqB;IAAA;EAAA;AAAA,GAA3B;;AAkBA,IAAMY,yBAAyB;EAAA,oEAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAC5BX,KAD4B,GACpB,EADoB;YAE5BC,UAF4B,GAEf,gEAFe;;YAIhC,KAASC,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;cAC3BF,KAAK,IAAIC,UAAU,CAACE,MAAX,CAAkBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAClCL,UAAU,CAACM,MADY,CAAlB,CAAT;YAED,CAP+B,CAShC;;;YATgC;YAAA,OAUfC,wBAAYI,uBAAZ,CAAoCZ,KAApC,CAVe;;UAAA;YAU5BU,IAV4B;;YAAA,KAW5BA,IAX4B;cAAA;cAAA;YAAA;;YAAA;YAAA,OAYxBC,yBAAyB,EAZD;;UAAA;YAAA,kCAezBX,KAfyB;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAAzBW,yBAAyB;IAAA;EAAA;AAAA,GAA/B;;eAkBe;EACbZ,qBAAqB,EAArBA,qBADa;EAEbY,yBAAyB,EAAzBA;AAFa,C"}